<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Fast Feedback&mdash;Mark Crossfield</title>
      <meta name="viewport" content="width=device-width">

      <!-- syntax highlighting CSS -->
      <link rel="stylesheet" href="/css/syntax.css">

      <!-- Custom CSS -->
      <link rel="stylesheet" href="/css/main.css">

      <!-- Responsive CSS -->
      <link rel="stylesheet" href="/css/responsive.css">

      <!-- My CSS -->
      <link rel="stylesheet" href="/css/markcrossfield.css">

      <!-- Google Fonts -->
      <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>
      <link href='http://fonts.googleapis.com/css?family=Raleway:300,400,700' rel='stylesheet' type='text/css'>
      <link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz' rel='stylesheet' type='text/css'>
      <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-352611-12', 'markcrossfield.co.uk');
      ga('require', 'linkid', 'linkid.js');
      ga('send', 'pageview');

    </script>
  </head>
  <body>
    <div class="site">
      <div class="sidebar" id="sidebar">
        <div class="header">
          <a href="/"><img id="logo" src="/images/logo.png"></a>
          <span class="tagline">Developer, engineer, trouble maker</span>
        </div>
        <div class="footer">
          <span id="footer-links">
            <a href="/about/" class="footer-link">About Mark</a> <span class="separator">&bull;</span>
            <a href="https://twitter.com/mrmanc" class="footer-link">@mrmanc</a> <span class="separator">&bull;</span>
            <a href="https://github.com/mrmanc" class="footer-link">GitHub</a>
          </span>
        </div>
        <div class="posts">
          <ul class="posts-list">
            
              <li class="post-link">
                <a class="post-title" href="/posts/2014/03/16/free-hosting-with-github-pages.html">
                  <span class="post-date">16 Mar 2014</span>
                  Free hosting with Github Pages
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/continuous%20delivery/development/visualisation/2014/02/16/thats-no-moon-visualising-go-delivery-pipelines-using-d3-js.html">
                  <span class="post-date">16 Feb 2014</span>
                  That's no moon: Visualising Go Delivery Pipelines Using D3.js
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/2013/05/22/saving-the-world-one-dashboard-at-a-time-using-task-scheduler-and-nircmd-and-powercfg.html">
                  <span class="post-date">22 May 2013</span>
                  Saving the world, one dashboard at a time
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/development/visualisation/2012/06/26/ascii-graph-pivot-your-standard-out.html">
                  <span class="post-date">26 Jun 2012</span>
                  Ascii Graph - pivot your standard out
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/2012/06/25/simply-measure-anything-with-metriclogster.html">
                  <span class="post-date">25 Jun 2012</span>
                  Simply Measure Anything with MetricLogster
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/agile/development/performance/visualisation/2012/05/10/meet-graphite.html">
                  <span class="post-date">10 May 2012</span>
                  Meet Graphite
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/agile/development/2012/02/15/fast-feedback.html">
                  <span class="post-date">15 Feb 2012</span>
                  Fast Feedback
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/agile/development/2011/07/31/are-your-pairs-rotating-enough-generate-a-pairing-heat-map.html">
                  <span class="post-date">31 Jul 2011</span>
                  Are your pairs rotating enough? Generate a pairing heat map.
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/life%20hacks/2011/07/30/automating-vuze-with-dropbox-in-os-x.html">
                  <span class="post-date">30 Jul 2011</span>
                  Automating Vuze with Dropbox (in OS X)
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/2011/06/05/hello.html">
                  <span class="post-date">05 Jun 2011</span>
                  Hello!
                </a>
              </li>
            
          </ul>
        </div>
        <div class="footer">
          <p>Hosted on <a href="http://pages.github.com/">Github Pages</a> using <a href="http://jekyllrb.com/">Jekyll</a> and <a href="http://the-development.github.io/flex/">Flex</a>
        </div>
      </div>
      <section class="content">
        <div class="content" id="home">
  <div id="sidebar-button">
    <img src="/images/sidebar-button.png">
  </div>
  <div id="post-info">
    
    <div id="info-container">
      <h1 id="title">Fast Feedback</h1>
      <span id="date">15 Feb 2012</a>
    </div>
  </div>

  <div class="post">
    <p>My relationship with Ant has had its ups and downs. I hate writing a build file in a language that I'm unfamiliar with, and finding that the language seems designed to encourage and hideous result.</p>
<p>Recently however I felt I achieved something, successfully reducing the duration of our teams pre check in task task from three and a half minutes to only 24 seconds.</p>
<p>I think this is important that number of reasons. The first is that we are aiming to check in more often. The closer to your last check in you are, the easier and cheaper it is to use revert to recover from wrong turns. If the target takes too long, it becomes a barrier to checking in and tempts you to do just a little more. </p>
<p>Secondly, as many developers will attest, the longer you spend staring at Ant output the more context leaks out of your brain, until you find yourself just staring blankly into space. It doesn't help with the natural cadence of development.</p>
<p>Finally, time is money! Three minutes ten times a day across a large team can amount to hundreds of pounds worth of wasted time.</p>
<p>So what does our target do? Well, in it's fifth incarnation it runs a cut down set of unit tests, and checks we haven't introduced any measurable code quality issues using PMD and Checkstyle. In the past it has done anything we could think of:</p>
<ul>
<li>run our unit tests</li>
<li>run our integration tests</li>
<li>run our http container tests with the app running in Jetty</li>
<li>run our selenium browser tests</li>
<li>run our jstestdriver JavaScript tests</li>
<li>instrumented our classes using Cobertura and guarded against drops in test coverage</li>
<li>PMD and Checkstyle checks as mentioned above</li>
</ul>
<p>It has evolved over time depending on how frustrated we were with it's length, and what we were working on at the time (hence what the risks were). At our lowest, we were spending around fifteen minutes running tests before checking in.</p>
<p>It was suggested to us that we should be able to hold our breath whilst our tests run, and I'm glad to say that even the smokers of the team should be able to do that for 24 seconds.</p>
<p>Whilst pragmatically sacrificing coverage has got us so far, the recent drop required something a bit more sophisticated. Two techniques have helped: running tests in parallel and only quality scanning modified files out of sync with Subversion.</p>
<p>The first part is achievable due to the experimental <a href="http://kentbeck.github.com/junit/javadoc/latest/org/junit/experimental/ParallelComputer.html">ParallelComputer</a> class introduced into JUnit. You can write a test suite which uses the class to run several tests in parallel programmatically. There are draw backs - the cost of the parallelisation may in fact increase the time your tests take. It took ours from 50 seconds to 12. Also, when the suite is invoked from Ant we've been unable to get it to generate the usual JUnit XML results - only the one test (our suite) gets reported. Still, hopefully the class will mature into either a test runner or option in the JUnit Ant task.</p>
<p>The second was a lucky guess that paid off - the SVNAnt library happens to provide a number of built in file selectors - my favourite being <a href="http://subclipse.tigris.org/svnant/selectors.html#svnmodified">svnmodified</a>. This allows you to create filesets containing only those files you have edited since your last check in. I've used this to restrict our PMD and Checkstyle operations and the effect was awesome. PMD was the biggest culprit spending ages longer than the tests themselves. PMD now runs in just six seconds!</p>
<p>Is it finished? No, of course not - it can always get faster, and unchecked will always gradually get slower. As we work on different aspects of the applicant we will find it more important to run different types of tests. And as we mature the types of tests we depend on will change. We could probably be smarter about what we clean and compile, perhaps even which tests we run. </p>
<p>So next time you find yourself staring at a screen full of any gibberish, think about reducing the amount of work your build does by being creative.</p>

  </div>
  <div class="colophon">
    <p>
      <span id="pub-date">Published on 15 Feb 2012</span> <span class="separator">&bull;</span>
      <span id="social">Find me on <a href="https://twitter.com/mrmanc">Twitter</a>!</span>
    </p>
  </div>
</div>


      </section>
    </div>
    <script src="/scripts/responsive.js" type="text/javascript"></script>
  </body>
</html>
